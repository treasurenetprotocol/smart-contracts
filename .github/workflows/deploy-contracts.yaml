name: Deploy Contracts

on:
  workflow_dispatch:
    inputs:
      action:
        description: Choose deploy or upgrade script family (matches package.json prefix)
        required: true
        default: deploy
        type: choice
        options:
          - deploy
          - upgrade
      target:
        description: Contract bundle/step (matches package.json middle segment)
        required: true
        default: base
        type: choice
        options:
          - base
          - tokenlocker
          - bid
          - wunit-wtcash
          - tcash
          - tcashauction
          - tcashloan
          - wtcash
          - producers
          - oracle
      network:
        description: Network to deploy to (must exist in package.json script)
        required: true
        default: dev
        type: choice
        options:
          - dev
          - dev2
          - testnet
          - mainnet
          - ethereum

jobs:
  deploy:
    uses: treasurenetprotocol/reusable-workflows/.github/workflows/reuseable-contracts-deploy.yml@main
    secrets: inherit
    with:
      action: ${{ inputs.action }}
      target: ${{ inputs.target }}
      network: ${{ inputs.network }}
