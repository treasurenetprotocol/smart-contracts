## USTNAuction

## Functions
### initialize(address _rolesContract, address _ustn, address _ustnf) -> void  
Initializes the USTNAuction contract with the required parameters.  
- `_rolesContract`: The address of the roles management contract.  
- `_ustn`: The address of the USTN token contract.  
- `_ustnf`: The address of the USTN Finance contract.

### queryAuctionManager() -> address

Query the address of the auction manager.

- `address`: The address of the auction manager

### auctionStart(uint mortgage, uint debt, uint \_debt) -> auctions

Starts a new auction with the given mortgage, debt, and interest.

- `mortgage`: The number of units in the auction
- `debt`: The starting auction price
- `_debt`: The interest generated by the loan
- `auctions`: The details of the created auction

### queryAuctions() -> auctions\[\]

Query the information of all auction items.

- `auctions[]`: An array containing the details of all ongoing auctions

### queryBider(uint n) -> (address,uint)

Query the winning bidder and the winning bid amount for a specific auction item.

- `n`: The index of the auction item

- `address`: The address of the winning bidder
- `uint`: The winning bid amount

### bid(uint n, uint bidAmount) -> bool

Allows a bidder to place a bid on an ongoing auction.

- `n`: The index of the auction item
- `bidAmount`: The amount of USTN to bid

- `bool`: Boolean indicating the success of the bid

### bidWithdrawal(uint n) -> bool

Allows a bidder to withdraw their bid from an ongoing auction.

- `n`: The index of the auction item

- `bool`: Boolean indicating the success of the bid withdrawal

### getAuction(uint n) -> bool

Get the n th auction item and update the corresponding status at the same time.

- `n`: The index of the auction item

- `bool`: Boolean indicating the success of the auction claim

### getAuctionBider(uint n) -> auctionbider\[\]

Get the addresses of all users who have participated in the bidding of the n th auction item.

- `n`: The index of the auction item

- `auctionbider[]`: An array containing the details of all bidders for the specified auction item

### upgradeState() -> bool

Update the status, when the auction time ends and there is no bid.

> \[!TIP\]
> FoundationManager can update the time of the auction item and restart the auction

- `bool`: The success of the state upgrade

## Structs

### auctions

- `uint sales`: The number of units in the auction
- `uint startValue`: The starting auction price
- `uint nowValue`: The current highest bid amount
- `uint timeOver`: The timestamp when the auction will be over
- `uint state`: The state of the auction (1: start, 2: ongoing, 3: over)
- `uint debt`: The interest generated by the loan

### auctionbider

- `uint time`:The timestamp when the bid was placed
- `address bider`:The address of the bidder
- `uint value`:The amount of USTN bid by the bidder

## Events

### auctionDetail(uint n, uint \_time, address bider, uint \_highValue, uint \_extractStatus);

Emitted when there is a change in the details of an auction item.

- `n`: The index of the auction item
- `_time`: The timestamp when the event is emitted
- `bider`: The address of the bidder
- `_highValue`: The highest bid value
- `_extractStatus`: The status of the bid extraction(1: not extracted 2: extracted)

### auctionStatus(uint n, uint \_time, uint \_auction, uint \_startValue, uint \_highValue, uint \_overTime, uint \_status);

Emitted when there is a change in the status of an auction.

- `n`: The index of the auction item
- `_time`: The timestamp when the event is emitted
- `_auction`: The number of units in the auction
- `_startValue`: The starting auction price
- `_highValue`: The highest bid value
- `_overTime`: The time when the auction is over
- `_status`: The status of the auction(1: start 2: ing 3: over)

### personalAuction(address \_user, uint n, uint \_sales);

Emitted when a user wins an auction.

- `_user`: The address of the winning bidder
- `n`: The index of the auction item

- `_sales`: The number of units sold